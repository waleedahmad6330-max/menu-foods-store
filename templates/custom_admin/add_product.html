{% extends 'store/base.html' %}
{% block content %}
<!-- Styles same as before -->
<style>
    .admin-form-container { background: #f8f9fa; padding: 60px 0; }
    .form-card { background: #fff; border-radius: 24px; padding: 40px; box-shadow: 0 20px 50px rgba(0,0,0,0.08); position: relative; overflow: hidden; max-width: 900px; margin: 0 auto; }
    .top-accent { position: absolute; top: 0; left: 0; right: 0; height: 8px; background: #006837; border-radius: 24px 24px 0 0; }
    .clean-input { background-color: #fcfcfc; border: 2px solid #f0f0f0; border-radius: 12px; padding: 12px; width: 100%; transition: 0.3s; }
    .clean-input:focus { border-color: #006837; background-color: #fff; outline: none; }
    .btn-submit { background: linear-gradient(135deg, #006837 0%, #004d29 100%); color: white; border: none; padding: 16px; border-radius: 50px; width: 100%; font-weight: 800; margin-top: 20px; transition: 0.3s; }
    .section-divider { border-top: 2px dashed #eee; margin: 30px 0; }
    .info-label { font-weight: 700; color: #006837; margin-bottom: 10px; display: block; }
</style>

<div class="admin-form-container">
    <div class="container">
        <a href="{% url 'admin_dashboard' %}" class="text-decoration-none text-muted fw-bold mb-4 d-inline-block"><i class="fas fa-arrow-left me-2"></i> Back</a>

        <div class="form-card">
            <div class="top-accent"></div>
            <h3 class="fw-bold text-dark mb-4">Add New Product</h3>
            
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="row g-4">
                    <!-- Basic Info -->
                    <div class="col-md-6">
                        <label class="info-label">Product Name</label>
                        <input type="text" name="name" class="form-control clean-input" required>
                    </div>
                    <div class="col-md-3">
                        <label class="info-label">Price (Rs)</label>
                        <input type="number" name="price" class="form-control clean-input" required>
                    </div>
                    <div class="col-md-3">
                        <label class="info-label">Stock</label>
                        <input type="number" name="stock" class="form-control clean-input" value="100" required>
                    </div>

                    <!-- Discount Section -->
                    <div class="col-12"><div class="p-3 rounded bg-light border">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="small fw-bold">Discount %</label>
                                <input type="number" name="discount_percentage" class="form-control clean-input" placeholder="0" min="0" max="100">
                            </div>
                            <div class="col-md-6">
                                <label class="small fw-bold">End Time</label>
                                <input type="datetime-local" name="discount_end_time" class="form-control clean-input">
                            </div>
                        </div>
                    </div></div>

                    <!-- Categories -->
                    <div class="col-12">
                        <label class="info-label">Categories</label>
                        <select name="categories" class="form-select clean-input" multiple required style="height: 120px;">
                            {% for parent in categories %}
                                {% if not parent.parents.exists %}
                                    <optgroup label="{{ parent.name|upper }}">
                                        {% for child in parent.children.all %}
                                            <option value="{{ child.id }}">&nbsp;&nbsp;&#10004; {{ child.name }}</option>
                                        {% endfor %}
                                    </optgroup>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>

                    <!-- DETAILED INFO BLOCKS (New) -->
                    <div class="col-12 section-divider"></div>
                    
                    <div class="col-12">
                        <label class="info-label"><i class="fas fa-align-left me-2"></i> Description</label>
                        <textarea name="description" class="form-control clean-input" rows="4" placeholder="Main description..."></textarea>
                    </div>

                    <div class="col-md-4">
                        <label class="info-label"><i class="fas fa-leaf me-2"></i> Ingredients</label>
                        <textarea name="ingredients" class="form-control clean-input" rows="5" placeholder="List ingredients here (Press Enter for new line)"></textarea>
                    </div>
                    <div class="col-md-4">
                        <label class="info-label"><i class="fas fa-utensils me-2"></i> How to Use</label>
                        <textarea name="how_to_use" class="form-control clean-input" rows="5" placeholder="Cooking instructions..."></textarea>
                    </div>
                    <div class="col-md-4">
                        <label class="info-label"><i class="fas fa-truck me-2"></i> Shipping Info</label>
                        <textarea name="shipping_info" class="form-control clean-input" rows="5">Standard shipping rates apply. Delivery within 3-5 working days.</textarea>
                    </div>

                    <div class="col-12 section-divider"></div>

                    <div class="col-12">
                        <label class="info-label">Product Image</label>
                        <input type="file" name="image" class="form-control clean-input" required>
                    </div>

                    <div class="col-12"><button type="submit" class="btn-submit">PUBLISH PRODUCT</button></div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}